<!DOCTYPE html>
<html> 
<head>
    <title>Visualization Final</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>    
    <style>
         body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .line {
            fill: none;
            stroke-width: 2px;
        }

        .dot {
            stroke-width: 2px;
        }

        .axis-x text {
            font-size: 12px;
        }

        .axis-y text {
            font-size: 12px;
        }

        .axis path,
        .axis line {
            fill: none;
            stroke: black;
            shape-rendering: crispEdges;
        }

        .legend {
            font-size: 12px;
        }

        .legend rect {
            fill: none;
            stroke-width: 2;
        }
        .tooltip {
            position: absolute;
            text-align: center;
            width: 60px;
            height: 28px;
            padding: 2px;
            font: 12px;
            background: lightsteelblue;
            border: 0px;
            border-radius: 8px;
            pointer-events: none;
        }
        h3 {
    display: block;
  }
    </style>
</head>
<body>
    <h1>Visualization Final</h1>
    <h3><a href="https://youtu.be/GtPIuNQhSNU">Youtube Video</a></h3>
    <h3><a href="    https://docs.google.com/document/d/1RCnxuSQxc1obOquQrVOLGPSA_gOnYlQjKkpigtTLo5w/edit?usp=sharing">Documentation Page</a></h3>       
<svg id="chart" width="800" height="600"></svg>
<div id="tooltip" class="tooltip" style="display: none;"></div>

<script>
    var data1 = [
        {category: '2008', value: 0.208090909},
        {category: '2009', value: 0.288916667},
        {category: '2010', value: 0.3435},
        {category: '2011', value: 0.34325},
        {category: '2012', value: 0.35391666},
        {category: '2013', value: 0.32125},
        {category: '2014', value: 0.284583333},
        {category: '2015', value: 0.2255},
        {category: '2016', value: 0.18925},
        {category: '2017', value: 0.18575},
        {category: '2018', value: 0.162333333},
        {category: '2019', value: 0.249},
        {category: '2020', value: 0.1895},
        {category: '2021', value: 0.1995},
        {category: '2022', value: 0.132},
        {category: '2023', value: 0.13608333}
    ];
    var data2 = [
        {category: '2008', value: 0.108},
        {category: '2009', value: 0.147333333},
        {category: '2010', value: 0.187166667},
        {category: '2011', value: 0.18075},
        {category: '2012', value: 0.166833333},
        {category: '2013', value: 0.152916667},
        {category: '2014', value: 0.13125},
        {category: '2015', value: 0.112333333},
        {category: '2016', value: 0.092583333},
        {category: '2017', value: 0.0815},
        {category: '2018', value: 0.071416667},
        {category: '2019', value: 0.125},
        {category: '2020', value: 0.118},
        {category: '2021', value: 0.1405},
        {category: '2022', value: 0.0915},
        {category: '2023', value: 0.076916667}
    
    ];

    var data3 = [
        {category: '2008', value: 0.060818182},
        {category: '2009', value: 0.098916667},
        {category: '2010', value: 0.118416667},
        {category: '2011', value: 0.117583333},
        {category: '2012', value: 0.108583333},
        {category: '2013', value: 0.092166667},
        {category: '2014', value: 0.081583333},
        {category: '2015', value: 0.069666667},
        {category: '2016', value: 0.060166667},
        {category: '2017', value: 0.051916667},
        {category: '2018', value: 0.048416667},
        {category: '2019', value: 0.081},
        {category: '2020', value: 0.074},
        {category: '2021', value: 0.091},
        {category: '2022', value: 0.0555},
        {category: '2023', value: 0.048}
    ];

    var data4 = [
        {category: '2008', value: 0.046545455},
        {category: '2009', value: 0.07975},
        {category: '2010', value: 0.102833333},
        {category: '2011', value: 0.100166667},
        {category: '2012', value: 0.088333333},
        {category: '2013', value: 0.07775},
        {category: '2014', value: 0.06725},
        {category: '2015', value: 0.051583333},
        {category: '2016', value: 0.044416667},
        {category: '2017', value: 0.0415},
        {category: '2018', value: 0.032666667},
        {category: '2019', value: 0.065},
        {category: '2020', value: 0.055},
        {category: '2021', value: 0.074},
        {category: '2022', value: 0.0475},
        {category: '2023', value: 0.037416667}
    ];

    var data5 = [
        {category: '2008', value: 0.046818182},
        {category: '2009', value: 0.06975},
        {category: '2010', value: 0.094833333},
        {category: '2011', value: 0.1025},
        {category: '2012', value: 0.089833333},
        {category: '2013', value: 0.072833333},
        {category: '2014', value: 0.065},
        {category: '2015', value: 0.04975},
        {category: '2016', value: 0.041583333},
        {category: '2017', value: 0.036333333},
        {category: '2018', value: 0.03175},
        {category: '2019', value: 0.0685},
        {category: '2020', value: 0.0575},
        {category: '2021', value: 0.0725},
        {category: '2022', value: 0.042},
        {category: '2023', value: 0.028916667}
    ];

    var data6 = [
        {category: '2008', value: 0.039090909},
        {category: '2009', value: 0.066333333},
        {category: '2010', value: 0.091583333},
        {category: '2011', value: 0.0945},
        {category: '2012', value: 0.090166667},
        {category: '2013', value: 0.07725},
        {category: '2014', value: 0.060083333},
        {category: '2015', value: 0.053416667},
        {category: '2016', value: 0.044416667},
        {category: '2017', value: 0.042916667},
        {category: '2018', value: 0.03575},
        {category: '2019', value: 0.065},
        {category: '2020', value: 0.06},
        {category: '2021', value: 0.078},
        {category: '2022', value: 0.0475},
        {category: '2023', value: 0.03175}
    ];

    var data7 = [
        {category: '2008', value: 0.050181818},
        {category: '2009', value: 0.074083333},
        {category: '2010', value: 0.0875},
        {category: '2011', value: 0.09875},
        {category: '2012', value: 0.093},
        {category: '2013', value: 0.07275},
        {category: '2014', value: 0.053833333},
        {category: '2015', value: 0.057333333},
        {category: '2016', value: 0.041833333},
        {category: '2017', value: 0.0455},
        {category: '2018', value: 0.034416667},
        {category: '2019', value: 0.066},
        {category: '2020', value: 0.0695},
        {category: '2021', value: 0.092},
        {category: '2022', value: 0.0565},
        {category: '2023', value: 0.036833333}
    ];

var allData = [data1, data2, data3, data4, data5, data6, data7];

var svg = d3.select("#chart"),
    margin = {top: 100, right: 100, bottom: 100, left: 100},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom,
    g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var x = d3.scaleBand()
    .rangeRound([0, width])
    .padding(0.1)
    .domain(data1.map(function(d) { return d.category; }));

var y = d3.scaleLinear()
    .rangeRound([height, 0])
    .domain([0, d3.max(allData.reduce((acc, cur) => acc.concat(cur), []), function(d) { return d.value; })]);

var line = d3.line()
    .x(function(d) { return x(d.category) + x.bandwidth() / 2; })
    .y(function(d) { return y(d.value); });

allData.forEach(function(data, index) {
    g.append("path")
        .datum(data)
        .attr("class", "line")
        .attr("d", line)
        .style("stroke", function(d, i) { return d3.schemeCategory10[index]; }); // Use D3's color scheme
    });

allData.forEach(function(data, index) {
    g.selectAll(".dot" + index)
        .data(data)
        .enter().append("circle")
        .attr("class", "dot")
        .attr("cx", function(d) { return x(d.category) + x.bandwidth() / 2; })
        .attr("cy", function(d) { return y(d.value); })
        .attr("r", 4)
        .attr("fill", function(d, i) { return d3.schemeCategory10[index]; })
        .on("mouseover", function(event, d) {
            d3.select("#tooltip")
                .style("display", "inline-block")
                .html("Value: " + d.value)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 15) + "px");
            })
        .on("mouseout", function() {
            d3.select("#tooltip").style("display", "none");
            });
            });

g.append("g")
.attr("class", "axis axis-x")
.attr("transform", "translate(0," + height + ")")
.call(d3.axisBottom(x))
.append("text")
.attr("x", width / 2)
.attr("y", 40)
.attr("dy", "0.71em")
.attr("fill", "#000")
.text("Year");

g.append("g")
.attr("class", "axis axis-y")
.call(d3.axisLeft(y).ticks(6))
.append("text")
.attr("transform", "rotate(-90)")
.attr("y", -margin.left)
.attr("x", -height / 2)
.attr("dy", "4em")
.attr("text-anchor", "middle")
.attr("fill", "#000")
.text("Average Unemployment Rate");
    
svg.append("text")
    .attr("x", (width + margin.left + margin.right) / 2)
    .attr("y", margin.top / 2)
    .attr("text-anchor", "middle")
    .style("font-size", "16px")
    .style("text-decoration", "underline")
    .text("Average Unemployment Rates per Age Group from 2008-2023");

var legend = svg.append("g")
    .attr("class", "legend")
    .attr("transform", "translate(" + (width - 0) + "," + (margin.top/1.5) + ")");

var legendLabels = [
    data1 = "Age 16-19", 
    data2 = "Age 20-24",
    data3 = "Age 25-34",
    data4 = "Age 35-44",
    data5 = "Age 45-54",
    data6 = "Age 55-64",
    data7 = "Age 65+"
];

allData.forEach(function(data, index) {
    legend.append("rect")
        .attr("x", 0)
        .attr("y", index * 25)
        .attr("width", 20)
        .attr("height", 20)
        .style("fill", function(d, i) { return d3.schemeCategory10[index]; });

    legend.append("text")
        .attr("x", 30)
        .attr("y", index * 25 + 10)
        .attr("dy", "0.35em")
        .text(legendLabels[index]);
});

</script>

</body>
</html>
